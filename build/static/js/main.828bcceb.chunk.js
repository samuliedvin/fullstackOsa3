(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,n){e.exports=n(43)},22:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(10),u=n.n(o),i=(n(22),n(14)),l=n(11),c=n(12),s=n(15),m=n(13),h=n(16),f=function(e){var t=e.filter,n=e.handleFilterChange;return r.a.createElement("div",null,"rajaa n\xe4ytett\xe4vi\xe4: ",r.a.createElement("input",{value:t,onChange:function(e){return n(e)}}))},d=function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,e.person.name),r.a.createElement("td",null,e.person.number),r.a.createElement("td",null,r.a.createElement("button",{onClick:e.removeEntry},"poista")))},p=function(e){var t=e.message;return null===t?null:r.a.createElement("div",{className:"error"},t)},v=n(2),E=n.n(v),w="/api/persons",g={getAll:function(){return E.a.get(w).then(function(e){return e.data})},create:function(e){return E.a.post(w,e).then(function(e){return e.data})},update:function(e,t){return E.a.put("".concat(w,"/").concat(e),t).then(function(e){return e.data})},remove:function(e){return E.a.delete("".concat(w,"/").concat(e)).then(function(e){return e.data})}},S=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(m.a)(t).call(this,e))).componentDidMount=function(){g.getAll().then(function(e){e.forEach(function(e){return e.matchSearch=!0}),n.setState({persons:e})})},n.addEntry=function(e){e.preventDefault();var t=n.state.newName.toLowerCase().indexOf(n.state.filter.toLowerCase())>=-1,a={name:n.state.newName,number:n.state.newNumber};if(n.state.persons.find(function(e){return e.name===n.state.newName})){if(window.confirm("Nimelle on jo tallennettu numero, haluatko p\xe4ivitt\xe4\xe4 sen?")){var r=n.state.persons.find(function(e){return e.name===n.state.newName}).id;g.update(r,a).then(function(){g.getAll().then(function(e){e.forEach(function(e){return e.matchSearch=!0}),n.setState({persons:e}),n.setState({error:"puhelinnumero vaihdettu onnistuneesti"}),setTimeout(function(){n.setState({error:null})},2e3)})}).catch(function(e){g.create(a).then(function(){g.getAll().then(function(e){e.forEach(function(e){return e.matchSearch=!0}),n.setState({persons:e}),n.setState({error:"puhelinnumero vaihdettu onnistuneesti"}),setTimeout(function(){n.setState({error:null})},2e3)})})})}}else g.create(a).then(function(e){e.matchSearch=t,n.setState({persons:n.state.persons.concat(e),newName:"",newNumber:"",error:"puhelinnumero lis\xe4tty onnistuneesti"}),setTimeout(function(){n.setState({error:null})},2e3)})},n.removeEntry=function(e){return function(){window.confirm("Haluatko varmasti poistaa numeron?")&&g.remove(e).then(function(){g.getAll().then(function(e){e.forEach(function(e){return e.matchSearch=!0}),n.setState({persons:e}),n.setState({error:"puhelinnumero poistettu onnistuneesti"}),setTimeout(function(){n.setState({error:null})},2e3)})})}},n.handleNameChange=function(e){n.setState({newName:e.target.value})},n.handleNumberChange=function(e){n.setState({newNumber:e.target.value})},n.handleFilterChange=function(e){n.setState({filter:e.target.value});var t=Object(i.a)(n.state.persons);""!==e.target.value?t.forEach(function(t){t.matchSearch=-1!==t.name.toLowerCase().indexOf(e.target.value.toLowerCase())}):t.forEach(function(e){e.matchSearch=!0}),n.setState({persons:t})},n.state={persons:[],newName:"",newNumber:"",filter:"",error:null},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state.persons.filter(function(e){return e.matchSearch});return r.a.createElement("div",null,r.a.createElement(p,{message:this.state.error}),r.a.createElement("h2",null,"Puhelinluettelo"),r.a.createElement(f,{filter:this.state.filter,handleFilterChange:this.handleFilterChange}),r.a.createElement("h2",null,"Lis\xe4\xe4 uusi"),r.a.createElement("form",{onSubmit:this.addEntry},r.a.createElement("div",null,"nimi: ",r.a.createElement("input",{value:this.state.newName,onChange:this.handleNameChange})),r.a.createElement("div",null,"numero: ",r.a.createElement("input",{value:this.state.newNumber,onChange:this.handleNumberChange})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"lis\xe4\xe4"))),r.a.createElement("h2",null,"Numerot"),r.a.createElement("table",null,r.a.createElement("tbody",null,t.map(function(t){return r.a.createElement(d,{key:t.name,person:t,removeEntry:e.removeEntry(t.id)})}))))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(r.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[17,2,1]]]);
//# sourceMappingURL=main.828bcceb.chunk.js.map